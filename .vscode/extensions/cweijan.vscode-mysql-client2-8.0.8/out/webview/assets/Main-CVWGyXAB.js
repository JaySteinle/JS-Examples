import{a as A,bj as z,A as P,r as f,e as J,N as Q,v as d,f as p,a9 as R,ab as U,h as l,g as i,F as $,B as j,j as r,J as u,K as S,o as n,n as k,k as E,L as K,t as M,$ as m,bk as O,I as T,aa as F,bl as q,s as H,P as G,Q as W,C as X}from"./app-CsfJRy1X.js";import{u as Y}from"./resultUIStore-CandRoh3.js";import"./constants-DgoLmzql.js";import{b as h,D as x}from"./DatabaseType-C0wmHgR0.js";import"./wrapper-D1SE_yvb.js";import"./viewUtil-DCbZMcCo.js";import"./arrayUtil-CzswX_vs.js";import"./objectUtil-Z6JRxuBJ.js";const Z="data:image/svg+xml,%3csvg%20height='20'%20width='20'%20viewBox='-11.9%20-2%201003.9%20995.6'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m12.1%20353.9s-24-17.3%204.8-40.4l67.1-60s19.2-20.2%2039.5-2.6l619.2%20468.8v224.8s-.3%2035.3-45.6%2031.4z'%20fill='%232489ca'%20/%3e%3cpath%20d='m171.7%20498.8-159.6%20145.1s-16.4%2012.2%200%2034l74.1%2067.4s17.6%2018.9%2043.6-2.6l169.2-128.3z'%20fill='%231070b3'%20/%3e%3cpath%20d='m451.9%20500%20292.7-223.5-1.9-223.6s-12.5-48.8-54.2-23.4l-389.5%20354.5z'%20fill='%230877b9'%20/%3e%3cpath%20d='m697.1%20976.2c17%2017.4%2037.6%2011.7%2037.6%2011.7l228.1-112.4c29.2-19.9%2025.1-44.6%2025.1-44.6v-671.2c0-29.5-30.2-39.7-30.2-39.7l-197.7-95.3c-43.2-26.7-71.5%204.8-71.5%204.8s36.4-26.2%2054.2%2023.4v887.5c0%206.1-1.3%2012.1-3.9%2017.5-5.2%2010.5-16.5%2020.3-43.6%2016.2z'%20fill='%233c99d4'%20/%3e%3c/svg%3e",g=v=>(G("data-v-f2b0fd64"),v=v(),W(),v),ee={id:"tableTab",class:"tab"},te=["onClick"],oe=g(()=>i("img",{src:Z,alt:"VSCode Logo"},null,-1)),se=[oe],ie=g(()=>i("i",{class:"codicon-json text-yellow"},null,-1)),ae=[ie],le=g(()=>i("i",{class:"codicon-history"},null,-1)),ne=[le],ce=A({__name:"Main",setup(v){const w=z(),y=Y(),D=P(),a=f(null),_=f(!1),c=f("result"),I=J(()=>[{id:"design",i18n:"table.design",icon:"codicon-edit",disabled:()=>!_.value},{id:"result",i18n:"table.data",icon:"codicon-database blue"},{id:"log",i18n:"common.log",icon:"codicon-file"},{id:"erDiagram",i18n:"table.erDiagram",icon:"codicon-symbol-class yellow",hidden:()=>h(a.value),disabled:()=>!_.value||h(a.value)},{id:"status",i18n:"table.monitor",icon:"codicon-graph-line",disabled:()=>[x.SQLITE,x.DUCK_DB].includes(a.value),hidden:()=>h(a.value)}].filter(e=>{var t;return!((t=e.hidden)!=null&&t.call(e))})),b=e=>{typeof e=="string"&&(e={id:e});const{id:t,disabled:s}=e;s!=null&&s()||c.value!==t&&(c.value=t,w.push(t),t=="log"&&d.emit("initTerminal"))};Q(()=>{c.value=w.currentRoute.value.name,window.addEventListener("message",({data:e})=>{["RUN","DATA"].includes(e.type)&&(a.value=e.content.dbType,["design","result","erDiagram"].includes(c.value)||b("result"))}),d.on("table_info",({singleTable:e,dbType:t})=>{a.value=t,_.value=e,_.value||b("result")})});const N=()=>{d.emit("editInVSCode",y.toolbar.sql)},V=()=>{if(!D.isPay)return H(m("plan.premiumNotice"));d.emit("viewJSON")};return(e,t)=>{const s=S("vsc-tooltip"),B=S("router-view");return n(),p("div",null,[R(i("ul",ee,[(n(!0),p($,null,j(I.value,(o,L)=>{var C;return n(),p("li",{key:L,class:k(["tab__item",{"tab__item--active":c.value==o.id,disabled:(C=o.disabled)==null?void 0:C.call(o)}]),onClick:de=>b(o)},[o.icon?(n(),p("i",{key:0,type:"icon",class:k(o.icon),style:{position:"relative",top:"3px"}},null,2)):E("",!0),K(" "+M(l(m)(o.i18n)),1)],10,te)}),128)),r(s,{title:l(m)("table.editInVSCode")},{default:u(()=>[i("div",{class:"panel-icon !pl-2",style:{"border-left":"1px solid var(--border-color)"},onClick:N},se)]),_:1},8,["title"]),r(s,{title:l(m)("table.viewAsJSON")},{default:u(()=>[i("div",{class:"panel-icon",onClick:V},ae)]),_:1},8,["title"]),r(s,{title:l(m)("table.history")},{default:u(()=>[i("div",{class:"panel-icon",onClick:t[0]||(t[0]=o=>l(d).emit("viewHistory"))},ne)]),_:1},8,["title"])],512),[[U,l(y).showSQLPanel]]),r(B,null,{default:u(({Component:o})=>[r(O,null,{default:u(()=>[(n(),T(q,null,[(n(),T(F(o)))],1024))]),_:2},1024)]),_:1})])}}}),he=X(ce,[["__scopeId","data-v-f2b0fd64"]]);export{he as default};
