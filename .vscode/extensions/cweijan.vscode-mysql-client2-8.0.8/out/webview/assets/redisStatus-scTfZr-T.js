import{a as K,r as v,G as R,e as g,N as M,v as m,ah as w,f as A,g as s,j as t,J as c,K as x,o as U,L as r,t as l,P as D,Q as L,C as N}from"./app-CsfJRy1X.js";import{E as P}from"./index-DnpkziWr.js";import{a as j,E as O}from"./index-IXPW6-XP.js";import"./index-Mol43tTP.js";import"./_baseIteratee-B1xu3wc6.js";import"./isEqual-D5tWelSt.js";import"./merge-XvLx2pLN.js";import"./_initCloneObject-C9-7aIdS.js";import"./isArrayLikeObject-TyuahpZ8.js";import"./index-CFkyrkQx.js";const d=p=>(D("data-v-4879ed5f"),p=p(),L(),p),W={id:"app",class:"redis-status-container"},G={class:"mt-3 px-3"},J=d(()=>s("i",{class:"el-icon-refresh"},null,-1)),Q={class:"grid grid-cols-3 gap-4 mt-4 px-3"},q={class:"col-span-1"},z={class:"box-card p-3 bg-secondBg mb-3"},F=d(()=>s("span",{class:"text-base mb-2 block"},"Server",-1)),H={class:"server-status-tag-p"},X={class:"server-status-text"},Y={class:"server-status-tag-p"},Z=["title"],$={class:"server-status-tag-p"},ss={class:"server-status-text"},ts={class:"col-span-1"},es={class:"box-card p-3 bg-secondBg mb-3"},os=d(()=>s("span",{class:"text-base mb-2 block"}," Memory",-1)),as={class:"server-status-tag-p"},ns={class:"server-status-text"},cs={class:"server-status-tag-p"},rs={class:"server-status-text"},ls={class:"server-status-tag-p"},is={class:"server-status-text"},_s={class:"col-span-1"},ds={class:"box-card p-3 bg-secondBg mb-3"},ps=d(()=>s("span",{class:"text-base mb-2 block"},"Stats",-1)),us={class:"server-status-tag-p"},vs={class:"server-status-text"},ms={class:"server-status-tag-p"},hs={class:"server-status-text"},fs={class:"server-status-tag-p"},bs={class:"server-status-text"},gs={class:"mt-4 px-3"},xs={class:"box-card p-3 bg-secondBg mb-3"},ys=d(()=>s("span",{class:"text-base mb-2 block"},"Key Statistics",-1)),ks={class:"mt-4 px-3"},Ss={class:"box-card p-3 bg-secondBg mb-3"},Bs=d(()=>s("span",{class:"text-base mb-2 block"}," All Redis Info",-1)),Is=K({__name:"redisStatus",setup(p){const u=v(!1),h=v(null),y=v(2e3),n=R({}),k=g(()=>{const e=[];for(const o in n)if(o.startsWith("db")){const i=n[o].split(",");e.push({db:o,keys:i[0].split("=")[1],expires:i[1].split("=")[1],avg_ttl:i[2].split("=")[1]})}return e}),S=g(()=>{const e=[];for(const o in n)e.push({key:o,value:n[o]});return e});M(()=>{f(),m.on("info",e=>{C(e)}),m.emit("init")}),w(()=>{clearInterval(h.value)});const f=()=>{h.value=setInterval(()=>{u.value&&m.emit("init")},y.value)},B=(e,o)=>e.keys-o.keys,I=(e,o)=>e.expires-o.expires,T=(e,o)=>e.avg_ttl-o.avg_ttl,C=e=>{if(!e)return{};e=e.split(`
`);const o={};for(let a of e){if(a=a.replace(/\s/gi,""),a.startsWith("#")||!a)continue;const i=a.split(":");o[i[0]]=i[1]}Object.assign(n,o)};return(e,o)=>{const a=P,i=x("vsc-switch"),E=x("vsc-tooltip"),_=O,b=j;return U(),A("div",W,[s("div",G,[t(a,{type:"info",class:"mr-2"},{default:c(()=>[J,r(" Auto Refresh ")]),_:1}),t(E,{title:"Auto Refresh Switch, Refresh Every 2 Seconds"},{default:c(()=>[t(i,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=V=>u.value=V),onChange:f},null,8,["modelValue"])]),_:1})]),s("div",Q,[s("div",q,[s("div",z,[F,s("p",H,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Redis Version: "),s("span",X,l(n.redis_version),1)]),_:1})]),s("p",Y,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" OS: "),s("span",{class:"server-status-text",title:n.os},l(n.os),9,Z)]),_:1})]),s("p",$,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Process ID: "),s("span",ss,l(n.process_id),1)]),_:1})])])]),s("div",ts,[s("div",es,[os,s("p",as,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Used Memory: "),s("span",ns,l(n.used_memory_human),1)]),_:1})]),s("p",cs,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Used Memory Peak: "),s("span",rs,l(n.used_memory_peak_human),1)]),_:1})]),s("p",ls,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Used Memory Lua: "),s("span",is,l(Math.round(n.used_memory_lua/1024))+"K",1)]),_:1})])])]),s("div",_s,[s("div",ds,[ps,s("p",us,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Connected Clients: "),s("span",vs,l(n.connected_clients),1)]),_:1})]),s("p",ms,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Total Connections: "),s("span",hs,l(n.total_connections_received),1)]),_:1})]),s("p",fs,[t(a,{class:"server-status-container",type:"info"},{default:c(()=>[r(" Total Commands: "),s("span",bs,l(n.total_commands_processed),1)]),_:1})])])])]),s("div",gs,[s("div",xs,[ys,t(b,{data:k.value},{default:c(()=>[t(_,{prop:"db",label:"DB"}),t(_,{sortable:"",prop:"keys",label:"Keys","sort-method":B}),t(_,{sortable:"",prop:"expires",label:"Expires","sort-method":I}),t(_,{sortable:"",prop:"avg_ttl",label:"Avg TTL","sort-method":T})]),_:1},8,["data"])])]),s("div",ks,[s("div",Ss,[Bs,t(b,{data:S.value},{default:c(()=>[t(_,{prop:"key",label:"Key"}),t(_,{prop:"value",label:"Value"})]),_:1},8,["data"])])])])}}}),Ds=N(Is,[["__scopeId","data-v-4879ed5f"]]);export{Ds as default};
