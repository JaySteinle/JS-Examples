import{q,a as K,G as J,e as $,H as Q,bg as W,v as p,K as C,o as i,I as y,J as n,j as e,L as v,t as H,h as X,$ as L,g as _,f as P,U as Y,F as M,k as N,O as Z,P as ee,Q as te,C as oe,r as E,N as le,at as ae,w as ne}from"./app-CsfJRy1X.js";import{E as se,a as re}from"./index-DhuGMaj8.js";import{E as ie,a as de}from"./index-C2YL1HbR.js";import{E as ue}from"./index-uNi-6DtK.js";import{a as T,E as z}from"./index-IXPW6-XP.js";import"./castArray-lI4ar-YN.js";import"./clone-03YpQdki.js";import"./_baseClone-DbkstWix.js";import"./isEqual-D5tWelSt.js";import"./_initCloneObject-C9-7aIdS.js";import"./index-Mol43tTP.js";import"./_baseIteratee-B1xu3wc6.js";import"./merge-XvLx2pLN.js";import"./isArrayLikeObject-TyuahpZ8.js";import"./index-CFkyrkQx.js";const G=q("forward",{state:()=>({panel:{visible:!1,loading:!1,edit:{id:null,name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});var B=(r=>(r[r.Stop=0]="Stop",r[r.Running=1]="Running",r[r.AlreadyUsed=2]="AlreadyUsed",r))(B||{});const O=r=>(ee("data-v-78656478"),r=r(),te(),r),ce={class:"mb-2 ml-20"},me={class:"flex flex-row items-center w-72"},pe=O(()=>_("span",{class:"basis-14 text-center text-base"},":",-1)),ve={class:"forward-arrow"},_e={key:0,class:"el-icon-bottom"},fe={key:1,class:"el-icon-top"},ye={class:"flex flex-row items-center w-72"},we=O(()=>_("span",{class:"basis-14 text-center text-base"},":",-1)),be={class:"flex flex-row"},Ve=K({__name:"ForwardDialog",emits:["save"],setup(r,{emit:w}){const f=J({host:null}),x=w,g=G(),t=$(()=>g.panel),S=$(()=>t.value.edit.type=="Dynamic"?"1080":"port"),d=$(()=>{switch(t.value.edit.type){case"Local":return L("ssh.portForward.local");case"Remote":return L("ssh.portForward.remote")}return L("ssh.portForward.dynamic")});Q(()=>t.value.edit.type,u=>{t.value.edit.id||(t.value.edit.remoteHost=u=="Remote"?f.host:"127.0.0.1")}),W(()=>{p.on("config",u=>{Object.assign(f,u)})});const k=()=>{x("save",t.value.edit),t.value.loading=!0};return(u,a)=>{const U=C("RedMark"),R=se,A=re,b=ie,V=Z,F=C("vsc-switch"),D=de,l=C("vsc-button"),h=ue;return i(),y(h,{ref:"editDialog",modelValue:t.value.visible,"onUpdate:modelValue":a[11]||(a[11]=o=>t.value.visible=o),"show-close":!1,title:"Port Fowarding",width:"550px",top:"3vh",closeOnClickModal:!1},{footer:n(()=>[e(l,{type:"secondary",onClick:a[10]||(a[10]=o=>t.value.visible=!1)},{default:n(()=>[v(H(X(L)("common.cancel")),1)]),_:1}),e(l,{loading:t.value.loading,onClick:k},{default:n(()=>[v("Save")]),_:1},8,["loading"])]),default:n(()=>[e(D,{ref:"infoForm",model:t.value.edit,"label-width":"120px"},{default:n(()=>[_("div",ce,H(d.value),1),e(b,null,{label:n(()=>[e(U),v("Type ")]),default:n(()=>[e(A,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.edit.type=o),type:"relax"},{default:n(()=>[e(R,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.edit.type=o),value:"Local"},{default:n(()=>[v("Local")]),_:1},8,["modelValue"]),e(R,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.edit.type=o),value:"Remote"},{default:n(()=>[v("Remote")]),_:1},8,["modelValue"]),e(R,{modelValue:t.value.edit.type,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.edit.type=o),value:"Dynamic"},{default:n(()=>[v(" Dynamic(Socks Proxy) ")]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(b,null,{label:n(()=>[e(U),v("Local ")]),default:n(()=>[_("div",me,[e(V,{modelValue:t.value.edit.localHost,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.edit.localHost=o),class:"basis-72"},null,8,["modelValue"]),pe,e(V,{modelValue:t.value.edit.localPort,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.edit.localPort=o),placeholder:S.value,class:"basis-32"},null,8,["modelValue","placeholder"])])]),_:1}),t.value.edit.type!="Dynamic"?(i(),P(M,{key:0},[_("div",ve,[t.value.edit.type=="Remote"?(i(),P("i",_e)):(i(),P("i",fe))]),e(b,null,{label:n(()=>[e(U),v("Remote ")]),default:n(()=>[_("div",ye,[e(V,{modelValue:t.value.edit.remoteHost,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.edit.remoteHost=o),class:"basis-72"},null,8,["modelValue"]),we,e(V,{modelValue:t.value.edit.remotePort,"onUpdate:modelValue":a[7]||(a[7]=o=>t.value.edit.remotePort=o),placeholder:"port",class:"basis-32",onKeyup:Y(k,["enter"])},null,8,["modelValue"])])]),_:1})],64)):N("",!0),_("div",be,[e(b,{label:"Name",class:"w-64"},{default:n(()=>[e(V,{modelValue:t.value.edit.name,"onUpdate:modelValue":a[8]||(a[8]=o=>t.value.edit.name=o)},null,8,["modelValue"])]),_:1}),e(b,{class:"auto-start-form-item",label:"Auto Start",title:"Auto start with VS Code startup"},{default:n(()=>[e(F,{modelValue:t.value.edit.autoStartUp,"onUpdate:modelValue":a[9]||(a[9]=o=>t.value.edit.autoStartUp=o),class:"ml-2"},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),ge=oe(Ve,[["__scopeId","data-v-78656478"]]),ke=K({__name:"ForwardServerTable",props:{serverList:Array},emits:["selectServer"],setup(r,{emit:w}){const f=w;return(x,g)=>{const t=z,S=C("vsc-button"),d=T;return i(),y(d,{data:r.serverList,style:{width:"100%"}},{default:n(()=>[e(t,{prop:"key",label:"Key",width:"150",align:"center"}),e(t,{prop:"name",label:"Name",width:"350",align:"center"}),e(t,{prop:"count",label:"Count",width:"70",align:"center"}),e(t,{label:"Operation",width:"90",align:"center"},{default:n(({row:k})=>[e(S,{type:"icon",icon:"codicon-edit",title:"edit",onClick:u=>f("selectServer",k)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])}}}),he={class:"ml-2 my-1 text-base"},Ce={class:"ml-5"},Ie=K({__name:"forward",setup(r){const w=E(""),f=E(null),x=E([]),g=E([]),t=E(!1),S=G(),d=$(()=>S.panel);le(()=>{p.on("forwardList",l=>{g.value=l,d.value.loading=!1,d.value.visible=!1}).on("serverList",l=>{x.value=l}).on("name",l=>{w.value=l}).on("success",()=>{p.emit("load")}).on("error",({id:l,message:h})=>{for(const o of g.value)o.id==l&&(o.loading=!1);d.value.loading=!1,ae({message:h,type:"error"})}).init()});const k=l=>{w.value=l.name,f.value=l.key,t.value=!1,p.emit("selectServer",l.key)},u=l=>{p.emit("save",{info:l,serverKey:f.value})},a=()=>{d.value.edit={type:"Local",autoStartUp:!1,localHost:"127.0.0.1",remoteHost:"127.0.0.1"},d.value.visible=!0},U=()=>{p.emit("load")},R=l=>{switch(l){case B.Running:return"Running";case B.AlreadyUsed:return"AlreadyUsed";default:return"Stop"}},A=l=>{l.loading=!0,p.emit("start",l.id)},b=l=>{p.emit("stop",l)},V=l=>{p.emit("remove",{id:l,serverKey:f.value})},F=l=>{d.value.edit={...l},d.value.visible=!0},D=l=>{ne(L("confirm.deleteForward")).then(()=>{V(l)})};return(l,h)=>{const o=C("vsc-button"),c=z,I=C("vsc-switch"),j=T;return i(),P("div",null,[t.value?(i(),y(ke,{key:0,serverList:x.value,onSelectServer:k},null,8,["serverList"])):(i(),P(M,{key:1},[_("div",he,[e(o,{type:"icon",icon:"el-icon-d-arrow-left",onClick:h[0]||(h[0]=s=>t.value=!0)}),e(o,{type:"icon",icon:"codicon-add text-base",style:{color:"var(--vscode-terminal-ansiCyan)"},onClick:a}),e(o,{type:"icon",icon:"codicon-refresh text-base",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},onClick:U}),_("span",Ce,"Connection: "+H(w.value),1)]),e(j,{data:g.value,style:{width:"100%"}},{default:n(()=>[e(c,{prop:"name",label:"Name"}),e(c,{prop:"type",label:"Type"}),e(c,{prop:"localPort",label:"Local Port"}),e(c,{prop:"remoteHost",label:"Remote Host",width:"120"}),e(c,{prop:"remotePort",label:"Remote Port",width:"120"}),e(c,{prop:"keepAlive",label:"KeepAlive"},{default:n(s=>[e(I,{modelValue:s.row.keepAlive,"onUpdate:modelValue":m=>s.row.keepAlive=m,onChange:m=>u(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{prop:"autoStartUp",label:"AutoStart"},{default:n(s=>[e(I,{modelValue:s.row.autoStartUp,"onUpdate:modelValue":m=>s.row.autoStartUp=m,onChange:m=>u(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{prop:"state",label:"State"},{default:n(s=>[s.row.state==0?(i(),y(o,{key:0,type:"icon",icon:"el-icon-close text-base text-red"})):s.row.state==1?(i(),y(o,{key:1,type:"icon",icon:"el-icon-check text-base text-green"})):(i(),y(o,{key:2,type:"icon",icon:"el-icon-video-pause text-base text-yellow"})),v(" "+H(R(s.row.state)),1)]),_:1}),e(c,{fixed:"right",width:"200"},{default:n(s=>[s.row.state!=1?(i(),y(o,{key:0,type:"success",size:"small",title:"Start",loading:s.row.loading,icon:"el-icon-video-play",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},circle:"",onClick:m=>{A(s.row)}},null,8,["loading","onClick"])):N("",!0),s.row.state==1?(i(),y(o,{key:1,type:"danger",size:"small",title:"Stop",icon:"el-icon-switch-button",circle:"",onClick:m=>{b(s.row.id)}},null,8,["onClick"])):N("",!0),e(o,{type:"primary",size:"small",title:"Edit",icon:"el-icon-edit",style:{color:"var(--vscode-terminal-ansiCyan)"},circle:"",onClick:m=>{F(s.row)}},null,8,["onClick"]),e(o,{title:"delete",type:"danger",size:"small",icon:"el-icon-delete",style:{color:"#f56c6c"},circle:"",onClick:m=>D(s.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])],64)),e(ge,{onSave:u})])}}});export{Ie as default};
